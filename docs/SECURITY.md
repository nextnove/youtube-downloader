# 보안 가이드

YouTube 다운로더를 안전하게 사용하기 위한 보안 가이드입니다.

## 목차

1. [URL 보안](#url-보안)
2. [쿠키 파일 보안](#쿠키-파일-보안)
3. [다운로드 경로 보안](#다운로드-경로-보안)
4. [개인정보 보호](#개인정보-보호)
5. [보안 취약점 신고](#보안-취약점-신고)

## URL 보안

### 허용되는 URL

프로그램은 다음 YouTube 도메인만 허용합니다:

- `youtube.com`
- `www.youtube.com`
- `youtu.be`
- `m.youtube.com`

### URL 검증 기능

프로그램은 자동으로 다음을 검증합니다:

1. **프로토콜 검증**: HTTP/HTTPS만 허용
2. **도메인 검증**: YouTube 공식 도메인만 허용
3. **URL 패턴 검증**: 올바른 YouTube URL 형식 확인
4. **비디오 ID 추출**: 유효한 비디오 ID 존재 여부 확인

### 주의사항

- ❌ 단축 URL 서비스(bit.ly, tinyurl 등)를 통한 링크는 사용하지 마세요
- ❌ 이메일이나 메시지로 받은 의심스러운 링크는 사용하지 마세요
- ✅ YouTube에서 직접 복사한 URL만 사용하세요

## 쿠키 파일 보안

### 쿠키 파일이란?

쿠키 파일에는 YouTube 계정 세션 정보가 포함될 수 있습니다. 이를 통해:

- 연령 제한 콘텐츠 접근
- 비공개 재생목록 접근
- 프리미엄 콘텐츠 접근 (구독자인 경우)

### 쿠키 파일 보안 설정

#### Linux/Mac

```bash
# 쿠키 파일 권한 설정 (소유자만 읽기/쓰기)
chmod 600 cookies.txt

# 현재 권한 확인
ls -l cookies.txt
# 출력 예: -rw------- 1 user user 1234 Jan 01 12:00 cookies.txt
```

#### Windows

1. 파일 우클릭 → 속성
2. 보안 탭 → 고급
3. 상속 비활성화
4. 본인 계정만 읽기/쓰기 권한 부여

### 쿠키 파일 생성 방법

#### 방법 1: 브라우저 확장 프로그램

1. Chrome/Firefox에 "Get cookies.txt" 확장 프로그램 설치
2. YouTube 로그인
3. 확장 프로그램 클릭 → "Export" 클릭
4. `cookies.txt`로 저장

#### 방법 2: yt-dlp 명령어

```bash
# Chrome 브라우저에서 쿠키 추출
yt-dlp --cookies-from-browser chrome --cookies cookies.txt "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
```

### 쿠키 파일 관리

- ✅ 프로젝트 루트 디렉토리에 저장
- ✅ `.gitignore`에 포함되어 있는지 확인
- ✅ 정기적으로 갱신 (30일마다 권장)
- ❌ 다른 사람과 공유 금지
- ❌ 클라우드 스토리지에 업로드 금지
- ❌ 공개 저장소에 커밋 금지

### 쿠키 파일 보안 경고

프로그램은 다음 경우 경고를 표시합니다:

- 다른 사용자가 읽을 수 있는 권한
- 그룹이 읽을 수 있는 권한
- 비정상적으로 큰 파일 크기 (10MB 이상)

## 다운로드 경로 보안

### 안전한 경로

다음 위치에 다운로드하는 것을 권장합니다:

- `downloads/` (프로젝트 내 기본 폴더)
- `~/Downloads/` (사용자 다운로드 폴더)
- `~/Videos/` (사용자 비디오 폴더)
- `C:\Users\[사용자명]\Downloads\` (Windows)

### 위험한 경로

다음 위치는 자동으로 차단됩니다:

#### Windows
- `C:\Windows\`
- `C:\Program Files\`
- `C:\System32\`

#### Linux/Mac
- `/bin/`
- `/sbin/`
- `/usr/bin/`
- `/usr/sbin/`
- `/etc/`
- `/sys/`
- `/proc/`

### 경로 순회 공격 방지

프로그램은 `../` 패턴을 자동으로 차단하여 상위 디렉토리 접근을 방지합니다.

예시:
- ❌ `../../../etc/passwd`
- ❌ `downloads/../../../system`
- ✅ `downloads/my_videos`

## 개인정보 보호

### 로그 파일

프로그램은 다음 정보를 로그에 기록합니다:

- 다운로드한 비디오 URL
- 다운로드 시간
- 에러 메시지

**주의**: 로그 파일을 공유할 때는 개인정보를 제거하세요.

### 설정 파일

`config.json`에는 다음 정보가 저장됩니다:

- 다운로드 경로
- 기본 설정값
- 최근 사용한 URL (최대 10개)

**주의**: 설정 파일은 `.gitignore`에 포함되어 있습니다.

### 다운로드 히스토리

최근 URL 목록은 로컬에만 저장되며 외부로 전송되지 않습니다.

## 보안 모범 사례

### 일반 사용자

1. ✅ 공식 YouTube URL만 사용
2. ✅ 안전한 다운로드 경로 선택
3. ✅ 정기적으로 다운로드 폴더 정리
4. ✅ 의심스러운 에러 발생 시 로그 확인
5. ❌ 쿠키 파일 공유 금지

### 개발자

1. ✅ 최신 버전의 yt-dlp 사용
2. ✅ 의존성 정기 업데이트
3. ✅ 보안 테스트 실행
4. ✅ 코드 리뷰 시 보안 검토
5. ✅ 사용자 입력 검증 강화

## 보안 테스트

프로젝트에는 보안 관련 테스트가 포함되어 있습니다:

```bash
# 보안 테스트 실행
python -m unittest tests.test_security

# 모든 테스트 실행
python run_tests.py
```

## 알려진 제한사항

1. **쿠키 파일 암호화 없음**: 쿠키 파일은 평문으로 저장됩니다
2. **네트워크 암호화**: HTTPS를 사용하지만 중간자 공격 가능성 존재
3. **로컬 저장소**: 모든 데이터가 로컬에 저장되므로 물리적 접근 시 노출 가능

## 보안 취약점 신고

보안 취약점을 발견하신 경우:

1. **공개 이슈로 등록하지 마세요**
2. 프로젝트 관리자에게 비공개로 연락
3. 취약점 상세 정보 제공:
   - 취약점 설명
   - 재현 방법
   - 영향 범위
   - 가능한 해결 방법

## 업데이트 정책

- 보안 패치는 최우선으로 처리됩니다
- 중요 보안 업데이트는 즉시 릴리스됩니다
- 정기 보안 검토: 분기별 1회

## 참고 자료

- [yt-dlp 보안 가이드](https://github.com/yt-dlp/yt-dlp#security)
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Python 보안 모범 사례](https://python.readthedocs.io/en/stable/library/security_warnings.html)

---

**마지막 업데이트**: 2024년

이 문서는 지속적으로 업데이트됩니다. 최신 버전은 GitHub 저장소에서 확인하세요.
